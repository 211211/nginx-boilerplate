server {
    server_name             server_name localhost;
    listen                  80;
    include                 boilerplate/disable/logging.conf;
    return                  301 https://$hostname$request_uri;
}

server
{
    server_name             www.$hostname www.localhost;

    listen                  80;
    listen                  443 ssl;
    include                 boilerplate/enable/ssl.conf;
    include                 boilerplate/disable/logging.conf;
    return                  301 https://$hostname$request_uri;
}

server
{
    server_name             $hostname localhost;
    listen                  443 ssl;
    root                    /usr/share/nginx/html;

    include                 boilerplate/enable/ssl.conf;
    include                 boilerplate/enable/uploads.conf;
    include                 boilerplate/enable/gzip.conf;
    include                 boilerplate/limits/methods.conf;
    include                 boilerplate/limits/requests.conf;
    include                 boilerplate/filters/trailing_slashes.conf;

    access_log              /var/log/nginx/bots.access.log main_anon if=$is_bot;
    access_log              /var/log/nginx/access.log main_anon if=$is_human;
    error_log               /var/log/nginx/error.log error;

    include                 boilerplate/locations/system.conf;
    include                 boilerplate/locations/errors.conf;
    include                 boilerplate/locations/php.conf;
    include                 boilerplate/locations/main.conf;
    include                 boilerplate/locations/static.conf;
}
